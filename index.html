<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GIHS Term 1 2026 Cubing Competition - Results</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #0f1220; color: #fff; padding: 20px; }
        h2 { text-align: center; color: #3b85f5; }
        #nav-bar { margin: 15px 0; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .nav-group { display: flex; align-items: center; gap: 5px; background: #252a40; padding: 10px 18px; border-radius: 8px; border: 1px solid #3b85f5; }
        table { border-collapse: collapse; width: 100%; max-width: 1200px; margin: 0 auto 40px auto; background: #1a1d2b; border-radius: 8px; overflow: hidden; }
        th, td { border: 1px solid #333; padding: 10px; text-align: center; position: relative; }
        th { background: #252a40; color: #aaa; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .solver-link, .round-link { color: #3b85f5; text-decoration: underline; cursor: pointer; font-weight: bold; }
        .bubble { position: absolute; top: 2px; right: 2px; padding: 2px 6px; border-radius: 4px; font-size: 11px; font-weight: bold; }
        .pr-bubble { background: #3b85f5; color: white; } .sr-bubble { background: #28a745; color: white; }
        .rank-green { background: #28a745 !important; color: white; }
        .solve-best { color: #2ecc71 !important; font-weight: bold; }
        .solve-worst { color: #e74c3c !important; font-weight: bold; }
        #modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; }
        #profile-modal { background: #0f1220; width: 95%; max-width: 1100px; max-height: 85vh; overflow-y: auto; padding: 25px; border-radius: 12px; border: 1px solid #3b85f5; position: relative; }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 28px; cursor: pointer; color: #888; }
        .medal-box { display: flex; gap: 15px; justify-content: center; margin-bottom: 20px; }
        .medal { padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 14px; border: 1px solid rgba(255,255,255,0.1); }
        .gold { background: #ffd700; color: #000; } .silver { background: #c0c0c0; color: #000; } .bronze { background: #cd7f32; color: #000; }
        select { padding: 8px 14px; background: #0f1220; color: #fff; border: 1px solid #444; border-radius: 4px; cursor: pointer; }
        @media print { .no-print, #nav-bar, #interactive-container { display: none !important; } .print-view { display: block !important; } table { color: black; background: white; } th, td { border: 1px solid #000; } h2, h3 { color: black; } }
        @media screen { .print-view { display: none; } }
    </style>
</head>
<body>
    <div class="no-print" style="text-align:center;">
        <h2>GIHS Term 1 2026 Cubing Competition</h2>
        <button onclick="showLeaderboard()" style="padding:10px 20px; background:#f39c12; color:black; font-weight:bold; border:none; border-radius:5px; cursor:pointer;">üèÜ View Championship Leaderboard</button>
        <button onclick="window.print()" style="padding:10px 20px; background:#3b85f5; color:white; border:none; border-radius:5px; cursor:pointer; margin-left:10px;">Print PDF</button>
    </div>
    <div id="nav-bar" class="no-print"></div>
    <div id="interactive-container" class="no-print"></div>
    <div id="print-view" class="print-view"></div>
    <div id="modal-overlay" onclick="closeProfile()"><div id="profile-modal" onclick="event.stopPropagation()"><span class="close-modal" onclick="closeProfile()">&times;</span><h2 id="modal-name"></h2><div id="medal-container" class="medal-box"></div><div id="modal-content"></div></div></div>
    <script>
        const state = {"title":"GIHS Term 1 2026 Cubing Competition","events":{"3x3":{"parent":null,"rows":[]},"3x3 - First Round":{"parent":"3x3","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["21.169","17.943","16.900","22.249","20.104"],"bRec":null,"aRec":null},{"green":true,"name":"Sebastian Cook","solves":["24.812","21.764","20.796","16.746","20.721"],"bRec":null,"aRec":null},{"green":true,"name":"Xavier Ouano","solves":["22.441","44.967+++","27.275","24.912","22.814"],"bRec":null,"aRec":null},{"green":true,"name":"Zephram Cochrane","solves":["28.589","24.792","26.176","33.077","27.258"],"bRec":null,"aRec":null},{"green":true,"name":"Isaac Tran","solves":["DNF","28.749","30.416","29.597","25.054"],"bRec":null,"aRec":null},{"green":true,"name":"Pranav Kumaraguru","solves":["28.374","31.176","26.148","32.769","29.861"],"bRec":null,"aRec":null},{"green":false,"name":"Jiani Yang","solves":["39.302","43.659","27.037","31.746","32.216"],"bRec":null,"aRec":null},{"green":false,"name":"Anish Mangla","solves":["38.804+","45.507","55.103","36.044","34.089"],"bRec":null,"aRec":"PR"},{"green":false,"name":"Chloe Ma","solves":["1:02.585","1:18.155","1:02.305","1:04.053","59.071"],"bRec":null,"aRec":"PR"},{"green":false,"name":"Ethan Ho","solves":["1:00.502","1:12.013","DNF","56.056","58.846"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Raeva Bothra","solves":["1:32.744","1:24.203","42.302","1:29.563","1:12.264"],"bRec":"PR","aRec":null}]},"2x2":{"parent":null,"rows":[]},"2x2 - First Round":{"parent":"2x2","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["4.190","6.972","5.416","4.930","6.233"],"bRec":null,"aRec":null},{"green":true,"name":"Sebastian Cook","solves":["9.176","6.332","5.638","5.342","4.804"],"bRec":null,"aRec":null},{"green":true,"name":"Pranav Kumaraguru","solves":["8.917","5.935","6.607","3.926","8.614"],"bRec":"PR","aRec":null},{"green":false,"name":"Isaac Tran","solves":["8.488","8.129","7.239","9.321","9.131"],"bRec":null,"aRec":null},{"green":false,"name":"Xavier Ouano","solves":["8.881","7.562+","10.519","10.446","7.982+"],"bRec":null,"aRec":null},{"green":false,"name":"Anish Mangla","solves":["12.082+","10.738","13.248","10.136","7.670"],"bRec":null,"aRec":null},{"green":false,"name":"Jiani Yang","solves":["24.950","24.196","23.832","12.038","18.827"],"bRec":null,"aRec":null},{"green":false,"name":"Raeva Bothra","solves":["20.502","14.891","34.961","21.966","38.323"],"bRec":"PR","aRec":null},{"green":false,"name":"Gregory Hor","solves":["56.504","42.729","DNF","38.299","2:44.414"],"bRec":"PR","aRec":"PR"}]},"1x3x3":{"parent":null,"rows":[]},"1x3x3 - First Round":{"parent":"1x3x3","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["12.658","10.597","15.318","14.136","7.136"],"bRec":"SR","aRec":"SR"},{"green":true,"name":"Anish Mangla","solves":["24.403","14.795","22.285","15.101","16.870"],"bRec":"PR","aRec":"PR"},{"green":true,"name":"Sebastian Cook","solves":["28.426","10.995","15.059","23.496","22.714"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Jiani Yang","solves":["23.681","28.034","25.755","18.575","16.674"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Xavier Ouano","solves":["DNF","33.653","19.620","11.752","18.311"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Raeva Bothra","solves":["46.318","31.579","23.769","23.890","17.746"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Joshua Gansan","solves":["43.753","27.239","34.884","25.018","14.012"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Ethan Ho","solves":["32.452","15.846","1:05.298","1:43.393","29.463"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Gregory Hor","solves":["1:43.466","56.687","44.832","DNF","32.677"],"bRec":"PR","aRec":"PR"}]},"4x4":{"parent":null,"rows":[]},"4x4 - Final":{"parent":"4x4","rows":[{"green":true,"name":"Sebastian Cook","solves":["1:08.667","1:15.889","1:17.004","1:08.394","1:04.665"],"bRec":null,"aRec":null},{"green":true,"name":"Jeremy Arulampalam","solves":["1:13.102","1:16.502","1:06.103","1:14.466","1:05.213"],"bRec":null,"aRec":"PR"},{"green":true,"name":"Xavier Ouano","solves":["2:01.995","1:35.075","1:49.422","2:20.657","1:40.034"],"bRec":null,"aRec":null},{"green":false,"name":"Anish Mangla","solves":["2:42.723","2:57.168","3:48.831","3:05.783","DNF"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Jiani Yang","solves":["3:10.153","3:32.599","","",""],"bRec":"PR","aRec":null}]},"5x5":{"parent":null,"rows":[]},"5x5 - Final":{"parent":"5x5","rows":[{"green":true,"name":"Sebastian Cook","solves":["2:47.503","2:06.675","2:38.108","2:30.549","2:16.772"],"bRec":null,"aRec":null},{"green":true,"name":"Jeremy Arulampalam","solves":["2:27.333","2:51.547","2:28.606","2:29.474","2:54.978"],"bRec":null,"aRec":"PR"}]},"3x3 - Second Round":{"parent":"3x3","rows":[]},"3x3 - Final":{"parent":"3x3","rows":[]},"2x2 - Final":{"parent":"2x2","rows":[]},"1x3x3 - Final":{"parent":"1x3x3","rows":[]},"Pyraminx":{"parent":null,"rows":[]},"Pyraminx - Final":{"parent":"Pyraminx","rows":[]},"Megaminx":{"parent":null,"rows":[]},"Megaminx - Final":{"parent":"Megaminx","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["3:32.090","3:22.663","3:05.934","3:30.872","3:37.997"],"bRec":"SR","aRec":"SR"},{"green":true,"name":"Sebastian Cook","solves":["4:43.582","4:04.145","","",""],"bRec":null,"aRec":null}]},"Skewb":{"parent":null,"rows":[]},"Skewb - Final":{"parent":"Skewb","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["12.580","12.802","8.756","6.970","11.926"],"bRec":"SR","aRec":"SR"},{"green":true,"name":"Jiani Yang","solves":["27.466","57.343","43.245","DNF","56.887"],"bRec":null,"aRec":null}]},"Mirror Cube":{"parent":null,"rows":[]},"Mirror Cube - Final":{"parent":"Mirror Cube","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["1:00.371","1:04.915","56.956","57.055","1:02.285"],"bRec":"SR","aRec":"SR"},{"green":true,"name":"Jiani Yang","solves":["2:15.570+","2:07.447","2:18.708","2:09.122","1:25.679"],"bRec":"PR","aRec":"PR"},{"green":true,"name":"Sebastian Cook","solves":["2:42.458","2:41.444","","",""],"bRec":null,"aRec":null}]},"3x3 OH":{"parent":null,"rows":[]},"3x3 OH - Final":{"parent":"3x3 OH","rows":[{"green":true,"name":"Jeremy Arulampalam","solves":["44.084","54.035","48.913","41.109","DNF"],"bRec":null,"aRec":null},{"green":true,"name":"Sebastian Cook","solves":["1:14.535","58.708","1:24.075","51.965","1:02.970"],"bRec":null,"aRec":null},{"green":true,"name":"Chloe Ma","solves":["2:06.649","2:26.979","2:42.855","2:22.638","3:01.923"],"bRec":"PR","aRec":"PR"},{"green":false,"name":"Xavier Ouano","solves":["","","","",""],"bRec":null,"aRec":null}]},"Ivy Cube":{"parent":null,"rows":[]},"Ivy Cube - First Round":{"parent":"Ivy Cube","rows":[]},"Ivy Cube - Second Round":{"parent":"Ivy Cube","rows":[]},"Ivy Cube - Final":{"parent":"Ivy Cube","rows":[]}},"eventOrder":["3x3","Ivy Cube","2x2","1x3x3","4x4","5x5","Pyraminx","Megaminx","Skewb","Mirror Cube","3x3 OH"]}; let activeKey = null;
        function parseTime(str) {
    if (!str || str.trim() === "") return null;
    let clean = str.replace(/\[.*?\]/g, '').trim().toLowerCase();
    if (clean === 'dnf' || clean === '‚Äî' || clean === '-') return Infinity;
    if (clean.includes(':')) {
        let p = clean.split(':');
        return (parseFloat(p[0]) * 60) + parseFloat(p[1]);
    }
    return isNaN(parseFloat(clean)) ? null : parseFloat(clean);
} function formatTime(val) {
    if (val === Infinity) return 'DNF';
    if (val === null || isNaN(val)) return '‚Äî';
    if (val >= 60) {
        let m = Math.floor(val / 60);
        let s = (val % 60).toFixed(3);
        return `${m}:${s < 10 ? '0' : ''}${s}`;
    }
    return val.toFixed(3);
} function getAverage(solves) {
    let t = solves.map(parseTime).filter(x => x !== null);
    if (t.length < 5) return null;
    if (t.filter(x => x === Infinity).length >= 2) return Infinity;
    let s = [...t].sort((a,b) => a - b);
    return (s[1] + s[2] + s[3]) / 3;
} function getSortScore(solves) {
    let t = solves.map(parseTime).filter(x => x !== null);
    if (t.length === 0) return 30000;
    let avg = getAverage(solves);
    if (avg !== null && avg !== Infinity) return avg;
    let validTimes = t.filter(x => x !== Infinity);
    let best = validTimes.length > 0 ? Math.min(...validTimes) : Infinity;
    if (best !== Infinity) return 10000 + best;
    return 20000;
} function getMedalCounts(name) {
    let counts = { gold: 0, silver: 0, bronze: 0 };
    for (let key in state.events) {
        if (!key.toLowerCase().includes('final')) continue;
        let sheet = state.events[key];
        if (!sheet.parent) continue;
        let sorted = [...sheet.rows].sort((a,b) => getSortScore(a.solves) - getSortScore(b.solves));
        let idx = sorted.findIndex(r => r.name === name);
        if (idx === 0) counts.gold++; else if (idx === 1) counts.silver++; else if (idx === 2) counts.bronze++;
    }
    return counts;
} function showProfile(name) {
    document.getElementById('modal-name').textContent = name.toUpperCase();
    let content = `<table><thead><tr><th>Event</th><th>Round</th><th>Rank</th><th>S1</th><th>S2</th><th>S3</th><th>S4</th><th>S5</th><th>Best</th><th>Average</th></tr></thead><tbody>`;
    let medals = getMedalCounts(name);
    let found = false;
    for (let key in state.events) {
        let sheet = state.events[key];
        if (!sheet.parent) continue;
        let sorted = [...sheet.rows].sort((a,b) => getSortScore(a.solves) - getSortScore(b.solves));
        let idx = sorted.findIndex(r => r.name === name);
        if (idx !== -1) {
            found = true;
            let p = sorted[idx];
            let tp = p.solves.map(parseTime);
            let bV = tp.filter(x => x !== null && x !== Infinity).length > 0 ? Math.min(...tp.filter(x => x !== null && x !== Infinity)) : Infinity;
            let wV = tp.filter(x => x !== null).length > 0 ? Math.max(...tp.filter(x => x !== null)) : null;

            content += `<tr><td>${sheet.parent}</td><td><span class="round-link" onclick="goToRound('${key.replace(/'/g, "\\'")}')">${key.split(' - ')[1]}</span></td>
                <td class="${p.green ? 'rank-green' : ''}">${idx+1}</td>
                ${p.solves.map(s => {
                    let val = parseTime(s);
                    let cls = (val !== null && val !== Infinity && val === bV) ? "solve-best" : (val !== null && val === wV ? "solve-worst" : "");
                    return `<td class="${cls}">${s||'‚Äî'}</td>`;
                }).join('')}
                <td>${formatTime(bV)}${p.bRec?`<span class="bubble ${p.bRec.toLowerCase()}-bubble">${p.bRec}</span>`:''}</td>
                <td>${formatTime(getAverage(p.solves))}${p.aRec?`<span class="bubble ${p.aRec.toLowerCase()}-bubble">${p.aRec}</span>`:''}</td></tr>`;
        }
    }
    document.getElementById('medal-container').innerHTML = `<div class="medal gold">ü•á ${medals.gold}</div><div class="medal silver">ü•à ${medals.silver}</div><div class="medal bronze">ü•â ${medals.bronze}</div>`;
    document.getElementById('modal-content').innerHTML = found ? content + `</tbody></table>` : `<div class="empty-msg">No history.</div>`;
    document.getElementById('modal-overlay').style.display = 'flex';
} function showLeaderboard() {
    document.getElementById('modal-name').textContent = "CHAMPIONSHIP LEADERBOARD";
    document.getElementById('medal-container').innerHTML = '';
    let solvers = {};
    Object.values(state.events).forEach(sheet => { sheet.rows.forEach(r => { solvers[r.name] = true; }); });
    let list = Object.keys(solvers).map(name => ({ name, ...getMedalCounts(name) }));
    list.sort((a,b) => (b.gold - a.gold) || (b.silver - a.silver) || (b.bronze - a.bronze));
    let html = `<table><thead><tr><th>Rank</th><th>Solver</th><th class="gold">Gold</th><th class="silver">Silver</th><th class="bronze">Bronze</th><th>Total</th></tr></thead><tbody>`;
    list.forEach((s, i) => {
        if (s.gold + s.silver + s.bronze === 0) return;
        html += `<tr><td>${i+1}</td><td class="solver-link" onclick="showProfile('${s.name.replace(/'/g, "\\'")}')">${s.name}</td><td>${s.gold}</td><td>${s.silver}</td><td>${s.bronze}</td><td>${s.gold+s.silver+s.bronze}</td></tr>`;
    });
    html += `</tbody></table>`;
    document.getElementById('modal-content').innerHTML = html;
    document.getElementById('modal-overlay').style.display = 'flex';
} function goToRound(key) { closeProfile(); if(typeof renderInteractive === 'function') renderInteractive(key); else render(key); } function closeProfile() { document.getElementById('modal-overlay').style.display = 'none'; }
        function generateTable(key) {
            const s = state.events[key]; if(!s || !s.parent) return '';
            const rows = [...s.rows].sort((a,b) => getSortScore(a.solves) - getSortScore(b.solves));
            let h = '<h3>'+key+'</h3><table><thead><tr><th>Rank</th><th>Name</th><th>S1</th><th>S2</th><th>S3</th><th>S4</th><th>S5</th><th>Best</th><th>Average</th></tr></thead><tbody>';
            rows.forEach((r, i) => {
                let tp = r.solves.map(parseTime); 
                let bV = tp.filter(x=>x!==null&&x!==Infinity).length>0?Math.min(...tp.filter(x=>x!==null&&x!==Infinity)):Infinity;
                let wV = tp.filter(x=>x!==null).length>0?Math.max(...tp.filter(x=>x!==null)):null;
                h += '<tr><td class="'+(r.green?'rank-green':'')+'">'+(i+1)+'</td><td style="text-align:left; padding-left:15px;"><span class="solver-link" onclick="showProfile(\''+r.name.replace(/'/g, "\\'")+'\')">'+r.name+'</span></td>';
                r.solves.forEach(v => {
                    let val = parseTime(v);
                    let cls = (val !== null && val !== Infinity && val === bV) ? "solve-best" : (val !== null && val === wV ? "solve-worst" : "");
                    h+='<td class="'+cls+'">'+(v||'‚Äî')+'</td>';
                });
                h += '<td>'+formatTime(bV)+(r.bRec?'<span class="bubble '+r.bRec.toLowerCase()+'-bubble">'+r.bRec+'</span>':'')+'</td><td>'+formatTime(getAverage(r.solves))+(r.aRec?'<span class="bubble '+r.aRec.toLowerCase()+'-bubble">'+r.aRec+'</span>':'')+'</td></tr>';
            });
            return h + '</tbody></table>';
        }
        function renderInteractive(newK = null) {
            if(newK) activeKey = newK; const nav = document.getElementById('nav-bar'); nav.innerHTML = '';
            if(!activeKey) activeKey = state.eventOrder[0];
            let n1 = document.createElement('div'); n1.className='nav-group';
            let sE = document.createElement('select'); state.eventOrder.forEach(e => { let o=document.createElement('option'); o.value=e; o.textContent=e; if(activeKey===e||state.events[activeKey].parent===e) o.selected=true; sE.appendChild(o); });
            sE.onchange=(e)=>renderInteractive(e.target.value); n1.appendChild(sE); nav.appendChild(n1);
            let curP = state.events[activeKey].parent || activeKey; let rds = Object.keys(state.events).filter(k=>state.events[k].parent===curP);
            if(rds.length>0) {
                let n2 = document.createElement('div'); n2.className='nav-group';
                let sR = document.createElement('select'); sR.insertAdjacentHTML('beforeend', '<option value="'+curP+'">-- Select Round --</option>');
                rds.forEach(r=>{ let o=document.createElement('option'); o.value=r; o.textContent=r.split(' - ')[1]; if(activeKey===r) o.selected=true; sR.appendChild(o); });
                sR.onchange=(e)=>renderInteractive(e.target.value); n2.appendChild(sR); nav.appendChild(n2);
            }
            document.getElementById('interactive-container').innerHTML = state.events[activeKey].parent ? generateTable(activeKey) : '<div style="text-align:center; padding:50px;">Select a round.</div>';
        }
        window.onload = () => {
            let pView = ''; Object.keys(state.events).forEach(k => { if(state.events[k].parent) pView += generateTable(k); });
            document.getElementById('print-view').innerHTML = pView; renderInteractive();
        };
    </script>
</body>
</html>
